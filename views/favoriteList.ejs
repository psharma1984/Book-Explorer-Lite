<%- include("partials/head.ejs") %>
<%- include("partials/header.ejs") %>
<h4><%= user.name.toUpperCase() %> Favorites</h4>
<div class="container">
   <% if (results.length > 0) { %>
        <% for (let i = 0; i < results.length; i += 6) { %>
            <div class="row mt-4">
                <% for (let j = i; j < i + 6 && j < results.length; j++) { %>
                  <div class="col-md-2 mb-3 d-flex flex-column align-items-center justify-content-center ">
                    <div class="d-flex mb-3 align-items-center justify-content-center" style="height: 180px;">       
                        <img src="<%= results[j].coverImage %>" alt="Book Cover" class="img-fluid" style="max-width: 100%; max-height: 100%;  transition: transform 0.3s ease-in-out;" onclick="navigateToBookDetail('<%= results[j]._id %>')">   
                     </div>   
                     <form action="/books/deleteFavorite/<%= results[j]._id %>" method="POST">
                        <input type="hidden" name="_csrf" value="<%= _csrf %>">
                        <button type="submit" class="btn btn-danger align-self-center favorite-button" data-book-id="<%= results[j]._id %>">Delete </button>
                    </form>       
                 </div>                     
                <% } %>
            </div>
        <% } %>
    <% } else { %>
        <p>No results found</p>
    <% } %>
</div>

     <script>
     
      function navigateToBookDetail(bookId){
        var bookDetailURL = '/books/'+ bookId;
        window.location.href = bookDetailURL;
      }

    </script>
<%- include("partials/footer.ejs") %>
